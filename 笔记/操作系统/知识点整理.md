# linux知识点整理

## 进程与线程
### 基本知识
`进程`是操作系统`资源分配`的基本单位，而`线程`是`任务调度和执行`的基本单位。cpu内核数是指物理上，一个cpu芯片上集成了几个内核单元，现代cpu都是多核的。插槽指cpu个数，内核数量是6个，线程数是12个。一台电脑能够安装几个显卡，并不在电脑本身，而在主板上预留有几个独立显卡的插槽。进程和线程都是一个时间段的描述，是CPU工作时间段的描述，不过是颗粒大小不同。
### 父子进程
所谓父子进程，就是在一个进程的基础上创建出另一条完全独立的进程，这个就是子进程，相当于父进程的副本。
在Linux中，程序员可以通过pid_t fork()函数即可为当前进程创建出一个子进程。
子进程也被称为父进程的守护进程：当一个进程需要做一些可能发生阻塞或中断的任务，父进程可通过子进程去做，来避免自己进程的崩溃。
### 僵尸进程（defunct进程）
子进程先于父进程退出，子进程就会变成僵尸进程。
一个进程在退出的时，会关闭所有的文件描述符，释放在用户空间中分配的内存，但是该进程的 PCB 仍会暂时保留，因为里面还存放着进程的退出状态以及统计信息等，这些PCB的信息均需该进程的父进程接收。
idle进程（0号进程）是系统所有进程的先祖，内核静态创建的，运行在内核态；这也是唯一一个没有通过fork或者kernel_thread产生的进程。
当父进程正处于运行或睡眠状态，是无法接收子进程的退出信号, 子进程的退出状态信息无法被回收，其PCB将一直存在于内存（也就是变成所谓的僵尸态），久而久之便会造成内存泄漏。
### 孤儿进程
父进程先于子进程退出，子进程就会变成孤儿进程。孤儿进程的危害：孤儿进程由系统回收，没有危害。
## 共享内存
在Linux中，每个进程都有属于自己的进程控制块（PCB）和地址空间（Addr Space），并且都有一个与之对应的页表，负责将进程的虚拟地址与物理地址进行映射（内存映射），通过内存管理单元（MMU）进行管理。两个不同的虚拟地址通过页表映射到物理空间的同一区域，它们所指向的这块区域即共享内存。  
共享内存本质上就是内存中的一块区域，用于进程间通信使用。该内存空间由操作系统分配与管理。
进程之间进行通信的时候，会获取到共享内存的地址，写端进程写入数据，读端进程通过直接访问内存完成数据读取。