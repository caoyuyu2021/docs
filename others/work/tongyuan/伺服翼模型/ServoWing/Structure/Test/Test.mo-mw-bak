within ServoWing.Structure.Test;
model Test
  inner Modelica.Mechanics.MultiBody.World world(gravityType = Modelica.Mechanics.MultiBody.Types.GravityTypes.NoGravity)
    annotation (Placement(transformation(origin = {-64.0, -2.0}, 
      extent = {{-10.0, -10.0}, {10.0, 10.0}})));
  MainBodyFlex mainBodyFlex
    annotation (Placement(transformation(origin = {-16.0, -2.0}, 
      extent = {{-10.0, -10.0}, {10.0, 10.0}})));
  Modelica.Mechanics.MultiBody.Joints.Prismatic prismatic(useAxisFlange = true)
    annotation (Placement(transformation(origin = {16.0, -2.0}, 
      extent = {{-10.0, -10.0}, {10.0, 10.0}})));
  TelescopicWingFlex telescopicWingFlex
    annotation (Placement(transformation(origin = {56.0, -2.0}, 
      extent = {{-10.0, -10.0}, {10.0, 10.0}})));
  Modelica.Blocks.Sources.TimeTable timeTable(table = {{0, 0}, {5, 2.3}, {5, 2.3}, {10, 2.3}})
    annotation (Placement(transformation(origin = {-116.0, 36.0}, 
      extent = {{-10.0, -10.0}, {10.0, 10.0}})));
  Modelica.Mechanics.Rotational.Sources.Position position1
    annotation (Placement(transformation(origin = {-68.0, 36.0}, 
      extent = {{-10.0, -10.0}, {10.0, 10.0}})));
  Mechanics.TelescopicRope telescopicRope annotation (Placement(transformation(origin = {-28.0, 36.0}, 
    extent = {{-10.0, -10.0}, {10.0, 10.0}})));
  annotation (experiment(Algorithm = Dassl, Interval = 0.01, StartTime = 0, StopTime = 10, Tolerance = 0.0001), 
    Diagram(coordinateSystem(extent = {{-100.0, -100.0}, {220.0, 100.0}}, 
      grid = {2.0, 2.0})));
  FoldingWingsFlex foldingWingsFlex
    annotation (Placement(transformation(origin = {122.0, -2.0}, 
      extent = {{-10.0, -10.0}, {10.0, 10.0}})));
  Modelica.Mechanics.MultiBody.Joints.Revolute revolute(useAxisFlange = true, 
    n = {0, 1, 0}) annotation (Placement(transformation(origin = {90.0, -2.0}, 
      extent = {{-10.0, -10.0}, {10.0, 10.0}})));
  Modelica.Mechanics.Rotational.Sources.Position position
    annotation (Placement(transformation(origin = {18.0, 80.0}, 
      extent = {{-10.0, -10.0}, {10.0, 10.0}})));
  Modelica.Blocks.Sources.TimeTable timeTable1(table = {{0, 0}, {5, 0}, {10, 6.28}, {20, 6.28}})
    annotation (Placement(transformation(origin = {-32.0, 82.0}, 
      extent = {{-10.0, -10.0}, {10.0, 10.0}})));
  Mechanics.FoldingGear foldingRope annotation (Placement(transformation(origin = {66.0, 54.0}, 
    extent = {{-10.0, -10.0}, {10.0, 10.0}})));
equation 
  connect(world.frame_b, mainBodyFlex.frame_a)
    annotation (Line(origin = {-40.0, -2.0}, 
      points = {{-14.0, 0.0}, {14.0, 0.0}}, 
      color = {95, 95, 95}, 
      thickness = 0.5));
  connect(mainBodyFlex.frame_b, prismatic.frame_a)
    annotation (Line(origin = {0.0, -2.0}, 
      points = {{-6.0, 0.0}, {6.0, 0.0}}, 
      color = {95, 95, 95}, 
      thickness = 0.5));
  connect(prismatic.frame_b, telescopicWingFlex.frame_a)
    annotation (Line(origin = {36.0, -2.0}, 
      points = {{-10.0, 0.0}, {10.0, 0.0}}, 
      color = {95, 95, 95}, 
      thickness = 0.5));
  connect(timeTable.y, position1.phi_ref)
    annotation (Line(origin = {-92.0, 36.0}, 
      points = {{-13.0, 0.0}, {12.0, 0.0}}, 
      color = {0, 0, 127}));
  connect(position1.flange, telescopicRope.drive)
    annotation (Line(origin = {-48.0, 36.0}, 
      points = {{-10.0, 0.0}, {10.0, 0.0}}, 
      color = {0, 0, 0}));
  connect(telescopicRope.pull1, prismatic.axis)
    annotation (Line(origin = {-1.0, 26.0}, 
      points = {{-25.0, 14.0}, {-25.0, 22.0}, {25.0, 22.0}, {25.0, -22.0}}, 
      color = {0, 127, 0}));
  connect(telescopicWingFlex.frame_b, revolute.frame_a)
    annotation (Line(origin = {73.0, -2.0}, 
      points = {{-7.0, 0.0}, {7.0, 0.0}}, 
      color = {95, 95, 95}, 
      thickness = 0.5));
  connect(revolute.frame_b, foldingWingsFlex.frame_a)
    annotation (Line(origin = {105.0, -1.0}, 
      points = {{-5.0, -1.0}, {7.0, -1.0}}, 
      color = {95, 95, 95}, 
      thickness = 0.5));
  connect(timeTable1.y, position.phi_ref)
    annotation (Line(origin = {-16.0, 53.0}, 
      points = {{-5.0, 29.0}, {22.0, 29.0}, {22.0, 27.0}}, 
      color = {0, 0, 127}));
  connect(position.flange, foldingRope.drive)
    annotation (Line(origin = {42.0, 67.0}, 
      points = {{-14.0, 13.0}, {2.0, 13.0}, {2.0, -13.0}, {14.0, -13.0}}, 
      color = {0, 0, 0}));
  connect(foldingRope.drive1, revolute.axis)
    annotation (Line(origin = {83.0, 34.0}, 
      points = {{-7.0, 26.0}, {7.0, 26.0}, {7.0, -26.0}}, 
      color = {0, 0, 0}));
end Test;